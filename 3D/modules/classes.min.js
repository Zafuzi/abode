class Body{constructor(x,y,r,color,rotate,origin){this.id=utils.makeid(),this.name="body_"+this.id,this.z_color=color,this.x=x,this.y=y,this.r=r,this.color=color,this.rotate=rotate,this.origin=origin,this.mines=1,this.mine_rate=20,this.units=0,rotate&&(this.angle=origin.angle)}update(){let self=this,origin=this.origin;this.x=origin.sol.x-utils.deg2xy(origin.distance,this.angle).x,this.y=origin.sol.y-utils.deg2xy(origin.distance,this.angle).y,this.angle+=game.grand_daddy_rate/100*origin.rate;let income=this.mines*this.mine_rate,tax=.1;game.resources.units+=.1*income/10,this.units+=income-.1*income}draw(){let self=this;ctx.beginPath(),ctx.arc(this.x,this.y,this.r,0,2*Math.PI);let rgba=utils.hexToRgbA(this.z_color);this.selected||(rgba.a=1),ctx.fillStyle="rgba("+[rgba.r,rgba.g,rgba.b,rgba.a].join(",")+")",ctx.fill(),this.selected&&(ctx.strokeStyle="#fff",ctx.lineWidth=5,ctx.stroke()),ctx.closePath()}click(){let self=this,rgba=utils.hexToRgbA(self.z_color),selected_element,ok;var a;(rgba.a=1,self.color="rgba("+[rgba.r,rgba.g,rgba.b,rgba.a].join(",")+")",$("#current_body").text()!=self.name)&&(console.log(self),replicate("tpl_selected",[{id:self.id,selected_name:self.name}]),replicate("tpl_actions",actions,(e,d,i)=>{$(e).on("click",function(){console.log("click"),d.action()})}),new Audio("./music/plop.wav").play())}add(item){let self=this;switch(item){case"mine":self.units-5e4>=0&&(self.mines+=1,self.units-=5e4)}}}